{% extends "base.html" %}

{% block content %}

{% if user.is_authenticated %}

{% if response %}
<pre>
  <code class="line-numbers language-{{langauge}}">
    {{response }}
  </code>
</pre>
<br/><br>
<form method="POST" action={% url "home_page" %}> 
  {% csrf_token %}
    <div class="mb-3">
      <textarea class="form-control" name="code" placeholder="Chat Bot to Fix Youre code" rows="3">{{code }}</textarea>
    </div>
    
    <select class="form-select" name="lang">
      <option selected>Select Programing language</option>
      {% for language in lang_list  %}
        <option value="{{language}}">{{language}}</option>
      {% endfor %}      
    </select>
    
    <br/>
    <button type="submit" class="btn btn-primary">Submit</button>
</form>
{% else %}
<pre>
  <code class="line-numbers language-{{langauge}}">
    def median(pool):
        '''Statistical median to demonstrate doctest.
        >>> median([2, 9, 9, 7, 9, 2, 4, 5, 8])
        7
        '''
        copy = sorted(pool)
        size = len(copy)
  </code>
</pre>
<br/><br>
<form method="POST" action={% url "home_page" %}> 
  {% csrf_token %}
    <div class="mb-3">
      <textarea class="form-control" name="code" placeholder="Chat Bot to Fix Youre code" rows="3"></textarea>
    </div>
    
    <select class="form-select" name="lang">
      <option selected>Select Programing language</option>
      {% for language in lang_list  %}
        <option value="{{language}}">{{language}}</option>
      {% endfor %}
      
    </select>
    
    <br/>
    <button type="submit" class="btn btn-primary">Submit</button>
</form>
{% endif %}

{% else %}

<div class="col-md-6 offset-md-3">
	<h1>Login</h1>
	<br/>
	
	<form method="POST" action="{% url 'login' %}">
		{% csrf_token %}
		<div class="form-group">
			<input type="text" class="form-control" placeholder="Enter Username" name="username">
			<br/>
		</div>
		<div class="form-group">
			<input type="password" class="form-control" placeholder="Enter Password" name="password">
		</div>
		<br/>

		<button type="submit" class="btn btn-secondary">Login</button>
	</form>
</div>
{% endif %}

{% endblock %}